<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>

<div class="toolbar">
  <div class="filters">
    <span>
      <label>Status:</label>
      <p-selectButton
        [options]="statusOptions"
        optionLabel="label"
        optionValue="value"
        [(ngModel)]="filtroAtivo">
      </p-selectButton>
    </span>

    <button pButton label="Filtrar" (click)="carregar()"></button>
    <button pButton label="Limpar" class="p-button-secondary" (click)="limparFiltros()"></button>
  </div>

  <button pButton label="Novo Departamento" class="p-button-success" (click)="novo()"></button>

  <div>
    <button pButton label="Funcionarios" class="p-button-success" (click)="funcionarios()"></button>
  </div>
</div>

<p-table [value]="departamento" [paginator]="true" [rows]="10" [loading]="carregando">
  <ng-template pTemplate="header">
    <tr>
      <th>Nome</th>
      <th>Sigla</th>
      <th>Status</th>
      <th style="width: 220px;">Ações</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-d>
    <tr>
      <td>{{ d.nome }}</td>
      <td>{{ d.sigla }}</td>
      <td>{{ d.ativo }}</td>
      <td>
        <p-tag [severity]="d.ativo ? 'success' : 'danger'" [value]="d.ativo ? 'Ativo' : 'Inativo'"></p-tag>
      </td>
      <td>
        <button pButton label="Editar" (click)="editar(d.id)"></button>
        <button pButton label="Inativar" class="p-button-danger" (click)="confirmarInativacao(d)" [disabled]="!d.ativo"></button>
      </td>
    </tr>
  </ng-template>
</p-table>

<div class="summary">
  Total: {{ departamento.length }}
</div>
